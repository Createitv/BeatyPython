# 构建模式

像搭积木一样，把不同的部件拼装成自己想要的东西的过程，就是一个构建过程。构建顾名思义就是把各种部件通过一定的方式和流程构造成一个成品的过程。在程序中，我们将这一过程称为构建模式（英文叫Builder Pattern，不同的书籍和资料翻译各有不同，有的也叫建造者模式或生成器模式）。
构建模式的核心思想是：将产品的创建过程与产品本身分离开来，使得创建过程更加清晰，能够更加精确地控制复杂对象的创建过程，让使用者可以用相同的创建过程创建不同的产品。

![构建模式](https://typora-1300715298.cos.ap-shanghai.myqcloud.com/uPic/image-20210615161338130.png)

### 与工厂模式区别

工厂模式关注的是整个产品（整体对象）的生成，即成品的生成；而构建模式关注的是产品的创建过程和细节，一步一步地由各个子部件构建为一个成品。
比如要创建一辆汽车，如果用工厂模式，直接就创建一辆有车身、轮胎、发动机的能用的汽车。如果用构建模式，则需要由车身、轮胎、发动机一步一步地组装成一辆汽车。

### 与组合模式的区别

组合模式关注的是“整体-部分”的关系，也就是关注对象的内部组成结构，那么它与构建模式又有什么区别与联系呢？
**区别**：组合模式关注的是对象内部的组成结构，强调的是部分与整体的关系。构建模式关注的是对象的创建过程，即由一个一个的子部件构建一个成品的过程。
**联系**：组合模式和构建模式其实也经常被一起使用。组合模式和构建模式一起使用

### 设计要点

![image-20210615161855305](https://typora-1300715298.cos.ap-shanghai.myqcloud.com/uPic/image-20210615161855305.png)

构建模式（升级版）中主要有三个角色，在设计构建模式时要找到并区分这些角色。
（1）**产品（Product）**：即你要构建的对象。
（2）构建者（Builder）：构建模式的核心类，负责产品的构建过程。
（3）**指挥者（BuilderManager**）：构建的管理类，负责管理每一种产品的创建数量和创建顺序。

### 构建模式的优缺点

#### 优点：

（1）将产品（对象）的创建过程与产品（对象）本身分离开来，让使用方（调用者）可以用相同的创建过程创建不同的产品（对象）。
（2）将对象的创建过程单独分解出来，使得创建过程更加清晰，能够更加精确地控制复杂对象的创建过程。
（3）针对升级版的构建模式，每一个具体构建者都相对独立，而与其他的具体构建者无关，因此可以很方便地替换具体构建者或增加新的具体构建者。

#### 缺点：

（1）增加了很多创建类，如果产品的类型和种类比较多，将会增加很多类，使整个系统变得更加庞杂。
（2）产品之间的结构相差很大时，构建模式将很难适应。

### 应用场景

（1）产品（对象）的创建过程比较复杂，希望将产品的创建过程和它本身的功能分离开来。
（2）产品有很多种类，每个种类之间内部结构比较类似，但有很多差异；不同的创建顺序或不同的组合方式，将创建不同的产品。

